import type { Task } from "@/types/task";

export const threadTasks: Record<string, Task[]> = {
  "1": [
    {
      id: "t1",
      name: "Setup Auth Provider",
      description: "Configure authentication provider with OAuth2",
      status: "completed",
      duration: "2m 34s",
      dependencies: [],
      agent: "setup-agent",
      startedAt: "10:30 AM",
      completedAt: "10:32 AM",
      subtasks: [
        { id: "s1", name: "Install OAuth2 library", completed: true },
        { id: "s2", name: "Configure provider settings", completed: true },
        { id: "s3", name: "Set up callback URLs", completed: true },
      ],
      executions: [
        {
          id: "exec-t1-1",
          agentId: "claude-opus-4",
          agentName: "Claude Opus 4",
          status: "completed",
          duration: "2m 34s",
          tokens: { input: 950, output: 620, total: 1570 },
        },
      ],
      selectedExecutionId: "exec-t1-1",
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-setup",
        baseBranch: "main",
        aheadBy: 3,
      },
    },
    {
      id: "t2",
      name: "Create User Model",
      description: "Define user schema with required fields",
      status: "completed",
      duration: "1m 12s",
      dependencies: ["t1"],
      agent: "model-agent",
      startedAt: "10:33 AM",
      completedAt: "10:34 AM",
      subtasks: [
        { id: "s1", name: "Define schema fields", completed: true },
        { id: "s2", name: "Add validation rules", completed: true },
      ],
      executions: [
        {
          id: "exec-t2-1",
          agentId: "claude-opus-4",
          agentName: "Claude Opus 4",
          status: "completed",
          duration: "1m 12s",
          tokens: { input: 820, output: 456, total: 1276 },
        },
      ],
      selectedExecutionId: "exec-t2-1",
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-user-model",
        baseBranch: "feat/auth-setup",
        aheadBy: 2,
      },
    },
    {
      id: "t3",
      name: "Implement Login API",
      description: "Build login endpoint with validation",
      status: "completed",
      duration: "3m 45s",
      dependencies: ["t2"],
      agent: "api-agent",
      startedAt: "10:35 AM",
      completedAt: "10:38 AM",
      executions: [
        {
          id: "exec-t3-1",
          agentId: "gpt-4",
          agentName: "GPT-4",
          status: "completed",
          duration: "3m 45s",
          tokens: { input: 1120, output: 780, total: 1900 },
        },
      ],
      selectedExecutionId: "exec-t3-1",
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-login-api",
        baseBranch: "feat/auth-user-model",
        aheadBy: 4,
      },
    },
    {
      id: "t4",
      name: "Implement Signup API",
      description: "Build signup endpoint with email verification",
      status: "completed",
      duration: "4m 21s",
      dependencies: ["t2"],
      agent: "api-agent",
      startedAt: "10:35 AM",
      completedAt: "10:39 AM",
      executions: [
        {
          id: "exec-t4-1",
          agentId: "gpt-4",
          agentName: "GPT-4",
          status: "completed",
          duration: "4m 21s",
          tokens: { input: 1340, output: 920, total: 2260 },
        },
      ],
      selectedExecutionId: "exec-t4-1",
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-signup-api",
        baseBranch: "feat/auth-user-model",
        aheadBy: 5,
      },
    },
    {
      id: "t5",
      name: "Build Login UI",
      description: "Create login form component with validation",
      status: "needs_feedback",
      dependencies: ["t3"],
      agent: "ui-agent",
      startedAt: "10:39 AM",
      subtasks: [
        { id: "s1", name: "Create form layout", completed: true },
        { id: "s2", name: "Add input validation", completed: true },
        { id: "s3", name: "Style error states", completed: true },
        { id: "s4", name: "Review design with team", completed: false },
      ],
      executions: [
        {
          id: "exec-t5-1",
          agentId: "claude-opus-4",
          agentName: "Claude Opus 4",
          status: "completed",
          duration: "2m 34s",
          tokens: { input: 1250, output: 890, total: 2140 },
        },
        {
          id: "exec-t5-2",
          agentId: "gpt-4",
          agentName: "GPT-4",
          status: "completed",
          duration: "3m 12s",
          tokens: { input: 1480, output: 1120, total: 2600 },
        },
      ],
      feedbackItemId: "1",
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-login-ui",
        baseBranch: "feat/auth-login-api",
        aheadBy: 6,
        isStale: true,
        behindBy: 2,
      },
      inputRequirements: [
        {
          id: "ir-t5-1",
          name: "Login API Endpoint",
          description: "Working login API endpoint to connect form to",
          expectedType: "code",
          isRequired: true,
          direction: "input",
          sourceType: "dependency",
          sourceDependencyId: "t3",
          fulfillmentStatus: "fulfilled",
          fulfilledByResourceId: "res-api-1",
        },
        {
          id: "ir-t5-2",
          name: "UI Mockups",
          description: "Design mockups for login form layout",
          expectedType: "image",
          isRequired: true,
          direction: "input",
          sourceType: "inherited",
          fulfillmentStatus: "fulfilled",
          fulfilledByResourceId: "res-3",
        },
      ],
      outputRequirements: [
        {
          id: "or-t5-1",
          name: "Login Component",
          description: "React component for user login",
          expectedType: "code",
          isRequired: true,
          direction: "output",
          autoCompleteTask: false,
          requiresReview: true,
          fulfillmentStatus: "partial",
          fulfilledByResourceId: "res-5",
          validationErrors: ["Awaiting review approval"],
        },
      ],
      availableResources: [
        { resourceId: "res-api-1", name: "Login API", type: "code", status: "approved" },
        { resourceId: "res-3", name: "UI Mockups", type: "image", status: "approved" },
      ],
      resourceCompletionStatus: {
        inputsFulfilled: 2,
        inputsTotal: 2,
        outputsFulfilled: 0,
        outputsTotal: 1,
        allRequirementsMet: false,
      },
    },
    {
      id: "t6",
      name: "Build Signup UI",
      description: "Create signup form with field validation",
      status: "running",
      dependencies: ["t4"],
      agent: "ui-agent",
      startedAt: "10:40 AM",
      subtasks: [
        { id: "s1", name: "Create form structure", completed: true },
        { id: "s2", name: "Add field validation", completed: true },
        { id: "s3", name: "Implement password strength", completed: false },
        { id: "s4", name: "Add terms checkbox", completed: false },
      ],
      executions: [
        {
          id: "exec-t6-1",
          agentId: "claude-opus-4",
          agentName: "Claude Opus 4",
          status: "running",
          tokens: { input: 980, output: 0, total: 980 },
        },
      ],
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-signup-ui",
        baseBranch: "feat/auth-signup-api",
        aheadBy: 3,
      },
    },
    {
      id: "t7",
      name: "Password Reset Flow",
      description: "Implement forgot password and reset functionality",
      status: "pending",
      dependencies: ["t3", "t4"],
      agent: "api-agent",
      subtasks: [
        { id: "s1", name: "Create reset token logic", completed: false },
        { id: "s2", name: "Build email template", completed: false },
        { id: "s3", name: "Implement reset endpoint", completed: false },
      ],
      plannerPrompt:
        "Create a detailed plan for implementing the password reset flow. Consider token generation, expiration, email delivery, and rate limiting for reset requests.",
      planApproval: "user",
      planStatus: "awaiting_approval",
      planner: { id: "gpt-5.2-codex", name: "GPT-5.2 Codex" },
      plan: {
        summary:
          "Implement a secure password reset flow with time-limited tokens, email delivery via SendGrid, and rate limiting to prevent abuse.",
        steps: [
          "Generate cryptographically secure reset tokens using crypto.randomBytes",
          "Store tokens in Redis with 1-hour TTL for automatic expiration",
          "Send reset email with tokenized link via SendGrid transactional API",
          "Build reset form UI with password strength validation",
          "Implement rate limiting: max 3 reset requests per email per hour",
          "Add audit logging for all reset attempts",
        ],
        approach:
          "Token-based reset flow with Redis for temporary storage and automatic expiration. Using SendGrid for reliable email delivery with template support.",
        considerations: [
          "Tokens must be single-use and expire after 1 hour",
          "Must not reveal whether an email exists in the system",
          "Rate limiting should be per-email, not per-IP",
        ],
        estimatedComplexity: "medium",
        agentId: "gpt-5.2-codex",
        agentName: "GPT-5.2 Codex",
        createdAt: "2024-01-15 10:45 AM",
      },
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-password-reset",
        baseBranch: "feat/auth-signup-api",
      },
    },
    {
      id: "t8",
      name: "Integration Tests",
      description: "Write end-to-end tests for auth flows",
      status: "blocked",
      dependencies: ["t5", "t6", "t7"],
      agent: "test-agent",
      subtasks: [
        { id: "s1", name: "Test login flow", completed: false },
        { id: "s2", name: "Test signup flow", completed: false },
        { id: "s3", name: "Test password reset", completed: false },
        { id: "s4", name: "Test edge cases", completed: false },
      ],
      inputRequirements: [
        {
          id: "ir-t8-1",
          name: "Login UI Component",
          description: "Completed login component to test",
          expectedType: "code",
          isRequired: true,
          direction: "input",
          sourceType: "dependency",
          sourceDependencyId: "t5",
          fulfillmentStatus: "partial",
          fulfilledByResourceId: "res-5",
          validationErrors: ["Resource not yet approved"],
        },
        {
          id: "ir-t8-2",
          name: "Signup UI Component",
          description: "Completed signup component to test",
          expectedType: "code",
          isRequired: true,
          direction: "input",
          sourceType: "dependency",
          sourceDependencyId: "t6",
          fulfillmentStatus: "unfulfilled",
        },
        {
          id: "ir-t8-3",
          name: "Password Reset Flow",
          description: "Password reset implementation to test",
          expectedType: "code",
          isRequired: true,
          direction: "input",
          sourceType: "dependency",
          sourceDependencyId: "t7",
          fulfillmentStatus: "unfulfilled",
        },
      ],
      outputRequirements: [
        {
          id: "or-t8-1",
          name: "Test Suite",
          description: "E2E test suite for auth flows",
          expectedType: "code",
          isRequired: true,
          direction: "output",
          autoCompleteTask: true,
          requiresReview: false,
          fulfillmentStatus: "unfulfilled",
        },
        {
          id: "or-t8-2",
          name: "Test Report",
          description: "Test coverage and results report",
          expectedType: "markdown",
          isRequired: false,
          direction: "output",
          autoCompleteTask: false,
          requiresReview: false,
          fulfillmentStatus: "unfulfilled",
        },
      ],
      availableResources: [
        { resourceId: "res-5", name: "Login Component", type: "code", status: "pending" },
      ],
      resourceCompletionStatus: {
        inputsFulfilled: 0,
        inputsTotal: 3,
        outputsFulfilled: 0,
        outputsTotal: 1,
        allRequirementsMet: false,
      },
      vcs: {
        strategy: "stacked_branches",
        branch: "feat/auth-tests",
        baseBranch: "feat/auth-password-reset",
      },
    },
  ],
  "2": [
    {
      id: "t1",
      name: "Setup Chart Library",
      description: "Install and configure charting library",
      status: "pending",
      dependencies: [],
      agent: "setup-agent",
      plannerPrompt:
        "Plan the chart library setup including package selection, configuration, and TypeScript type setup.",
      planApproval: "auto",
      planStatus: "approved",
      planner: { id: "claude-opus-4", name: "Claude Opus 4" },
      plan: {
        summary:
          "Install Recharts with TypeScript configuration and create reusable chart wrapper components.",
        steps: [
          "Install recharts and @types/recharts",
          "Create chart theme configuration",
          "Build ResponsiveChart wrapper component",
          "Set up chart color palette constants",
        ],
        estimatedComplexity: "low",
        agentId: "claude-opus-4",
        agentName: "Claude Opus 4",
        createdAt: "2024-01-15 09:00 AM",
      },
    },
    {
      id: "t2",
      name: "Design Data Schema",
      description: "Define analytics data models",
      status: "pending",
      dependencies: [],
      agent: "model-agent",
      plannerPrompt:
        "Design the data schema for analytics including time series data, aggregations, and metric definitions.",
      planApproval: "overseer",
      planStatus: "in_progress",
      planner: { id: "gpt-5.2-codex", name: "GPT-5.2 Codex" },
    },
    {
      id: "t3",
      name: "Build Metrics API",
      description: "Create API endpoints for analytics data",
      status: "pending",
      dependencies: ["t2"],
      agent: "api-agent",
      plannerPrompt:
        "Plan the metrics API endpoints including data fetching, filtering, aggregation, and caching strategy.",
      planApproval: "user",
      planStatus: "pending",
      planner: { id: "gpt-5.2-codex", name: "GPT-5.2 Codex" },
    },
    {
      id: "t4",
      name: "Real-time WebSocket",
      description: "Implement WebSocket connection for live updates",
      status: "pending",
      dependencies: ["t2"],
      agent: "api-agent",
    },
    {
      id: "t5",
      name: "Create Line Charts",
      description: "Build line chart components",
      status: "pending",
      dependencies: ["t1", "t3"],
      agent: "ui-agent",
    },
    {
      id: "t6",
      name: "Create Bar Charts",
      description: "Build bar chart components",
      status: "pending",
      dependencies: ["t1", "t3"],
      agent: "ui-agent",
    },
    {
      id: "t7",
      name: "Create Pie Charts",
      description: "Build pie chart components",
      status: "pending",
      dependencies: ["t1", "t3"],
      agent: "ui-agent",
    },
    {
      id: "t8",
      name: "Metrics Cards",
      description: "Build metric summary cards",
      status: "pending",
      dependencies: ["t3"],
      agent: "ui-agent",
    },
    {
      id: "t9",
      name: "Dashboard Layout",
      description: "Compose dashboard with all components",
      status: "pending",
      dependencies: ["t5", "t6", "t7", "t8"],
      agent: "ui-agent",
    },
    {
      id: "t10",
      name: "Live Updates UI",
      description: "Integrate WebSocket with UI components",
      status: "pending",
      dependencies: ["t4", "t9"],
      agent: "ui-agent",
    },
    {
      id: "t11",
      name: "Date Range Filter",
      description: "Add date range selection",
      status: "pending",
      dependencies: ["t9"],
      agent: "ui-agent",
    },
    {
      id: "t12",
      name: "Export to PDF",
      description: "Add dashboard export functionality",
      status: "pending",
      dependencies: ["t9"],
      agent: "export-agent",
    },
  ],
  "3": [
    {
      id: "t1",
      name: "Stripe SDK Setup",
      description: "Install and configure Stripe SDK",
      status: "completed",
      duration: "1m 05s",
      dependencies: [],
      agent: "setup-agent",
    },
    {
      id: "t2",
      name: "Payment Intent API",
      description: "Create payment intent endpoint",
      status: "completed",
      duration: "2m 30s",
      dependencies: ["t1"],
      agent: "api-agent",
    },
    {
      id: "t3",
      name: "Webhook Handler",
      description: "Handle Stripe webhooks",
      status: "completed",
      duration: "3m 15s",
      dependencies: ["t1"],
      agent: "api-agent",
    },
    {
      id: "t4",
      name: "Checkout UI",
      description: "Build payment checkout form",
      status: "completed",
      duration: "4m 45s",
      dependencies: ["t2"],
      agent: "ui-agent",
    },
    {
      id: "t5",
      name: "Subscription Management",
      description: "Handle subscription lifecycle",
      status: "completed",
      duration: "5m 20s",
      dependencies: ["t2", "t3"],
      agent: "api-agent",
    },
    {
      id: "t6",
      name: "Payment History",
      description: "Display user payment history",
      status: "completed",
      duration: "2m 50s",
      dependencies: ["t3", "t4"],
      agent: "ui-agent",
    },
  ],
  "4": [
    {
      id: "t1",
      name: "Email Provider Setup",
      description: "Configure SendGrid/SES",
      status: "completed",
      duration: "1m 30s",
      dependencies: [],
      agent: "setup-agent",
    },
    {
      id: "t2",
      name: "Template Engine",
      description: "Set up email template system",
      status: "completed",
      duration: "2m 45s",
      dependencies: ["t1"],
      agent: "setup-agent",
    },
    {
      id: "t3",
      name: "Welcome Email",
      description: "Create welcome email template",
      status: "completed",
      duration: "1m 20s",
      dependencies: ["t2"],
      agent: "template-agent",
    },
    {
      id: "t4",
      name: "Queue System",
      description: "Implement email queue with Redis",
      status: "failed",
      dependencies: ["t1"],
      agent: "queue-agent",
    },
    {
      id: "t5",
      name: "Scheduled Emails",
      description: "Add email scheduling functionality",
      status: "blocked",
      dependencies: ["t4"],
      agent: "scheduler-agent",
    },
  ],
  "5": [
    {
      id: "t1",
      name: "Redis Connection",
      description: "Set up Redis client connection",
      status: "completed",
      duration: "1m 15s",
      dependencies: [],
      agent: "setup-agent",
      vcs: {
        strategy: "worktree",
        worktree: "rate-limit-redis",
        worktreePath: "../rate-limit-worktrees/redis",
        baseBranch: "develop",
        aheadBy: 2,
      },
    },
    {
      id: "t2",
      name: "Token Bucket Logic",
      description: "Implement token bucket algorithm",
      status: "completed",
      duration: "3m 40s",
      dependencies: ["t1"],
      agent: "algorithm-agent",
      vcs: {
        strategy: "worktree",
        worktree: "rate-limit-bucket",
        worktreePath: "../rate-limit-worktrees/bucket",
        baseBranch: "develop",
        aheadBy: 5,
      },
    },
    {
      id: "t3",
      name: "Rate Limit Middleware",
      description: "Create Express middleware",
      status: "running",
      dependencies: ["t2"],
      agent: "middleware-agent",
      startedAt: "2:30 PM",
      vcs: {
        strategy: "worktree",
        worktree: "rate-limit-middleware",
        worktreePath: "../rate-limit-worktrees/middleware",
        baseBranch: "develop",
        aheadBy: 3,
        hasConflicts: true,
      },
    },
    {
      id: "t4",
      name: "Rate Limit Headers",
      description: "Add rate limit headers to responses",
      status: "pending",
      dependencies: ["t3"],
      agent: "middleware-agent",
      vcs: {
        strategy: "worktree",
        worktree: "rate-limit-headers",
        worktreePath: "../rate-limit-worktrees/headers",
        baseBranch: "develop",
      },
    },
  ],
};

// Legacy export for backwards compatibility
export const issueTasks = threadTasks;
